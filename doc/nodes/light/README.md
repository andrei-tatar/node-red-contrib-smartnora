## Light

Represents a [Google Home Light](https://developers.google.com/assistant/smarthome/guides/light) device.

### Node attributes:
- [Common](../common.md)
- `If state doesn't change via voice, warn user` - if checked, the assistant will warn if the device is already on/off
- `Allow brightness control` - if checked, the device will support the brightness trait, allowing brightness control (0-100)
- `Turn on when brightness/color changes` - if checked will also turn on the device when there is any change to the color/brightness level
- `Send/receive complete state as payload` - if **unchecked**, it will send/receive as payload, only the brightness. Meaning a brightness of 0 will turn off the device, otherwise will turn it on to the set brightness.
- `Override brightness when input is 0` - Value to set the device brightness when a payload of 0 is sent to the input turning the device off. This is used only if `Send/receive complete state as payload` is unchecked.
- `Color support` - will enable the color support for the light. When this mode is used the payload is always an object with the light state. 3 color modes are supported:
  - RGB
  - HSV
  - Temperature
- `On Payload` - the payload sent/received when the light is on (only if brightness/color is not used).
- `Off Payload` - the payload sent/received when the light is off (only if brightness/color is not used).


### Input/output payload can be:
- a number representing the brightness. If `Allow brightness control` is checked and `Send/receive complete state as payload` is unchecked
- An object with the following properties
  - `online` - boolean: true/false, default: true. Flag that indicates if the device is online
  - `on` - boolean: true/false, default: false. Flag that indicates if the device is turned on or off
  - `brightness` - number: 0-100, default: 0. Brightness the light is set at in percentage (only if `Allow brightness control` is checked)
  - `color` - object that contains the color:
    - if `RGB` mode is used, it has a number property called `spectrumRgb` which contains the RGB value of the color
    - if `HSV` mode is used, it has an object called `spectrumHsv` which contains 3 number properties called `hue` (0-360), `saturation` (0-1), `value` (0-1) which contain the HSV color
    - if `Temperature` mode is used, it has a number property called `temperatureK` which contains the temperature in K degrees


### On/Off example flow:

```
[{"id":"43e4d3e7.b408bc","type":"noraf-light","z":"15d66f47.1c0181","devicename":"Light","lightcolor":false,"brightnesscontrol":false,"commandonlycolor":false,"turnonwhenbrightnesschanges":false,"passthru":false,"statepayload":false,"brightnessoverride":"","roomhint":"","name":"","colortype":"rgb","nora":"c38ae3d9.b9765","topic":"","onvalue":"true","onvalueType":"bool","offvalue":"false","offvalueType":"bool","temperaturemin":"2700","temperaturemax":"5500","twofactor":"off","twofactorpin":"","x":840,"y":280,"wires":[["cfca929e.e531"]]},{"id":"3fc16ca9.e4f834","type":"inject","z":"15d66f47.1c0181","name":"On","props":[{"p":"payload"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"true","payloadType":"bool","x":670,"y":220,"wires":[["43e4d3e7.b408bc"]]},{"id":"9d02fb5b.39b7a8","type":"inject","z":"15d66f47.1c0181","name":"Off","props":[{"p":"payload"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"false","payloadType":"bool","x":670,"y":260,"wires":[["43e4d3e7.b408bc"]]},{"id":"26ba3509.cd2d3a","type":"inject","z":"15d66f47.1c0181","name":"Offline","props":[{"p":"payload"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"{\"online\":false}","payloadType":"json","x":670,"y":300,"wires":[["43e4d3e7.b408bc"]]},{"id":"a62a9a3b.7de8d8","type":"inject","z":"15d66f47.1c0181","name":"Online","props":[{"p":"payload"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"{\"online\":true}","payloadType":"json","x":670,"y":340,"wires":[["43e4d3e7.b408bc"]]},{"id":"cfca929e.e531","type":"debug","z":"15d66f47.1c0181","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":1020,"y":280,"wires":[]},{"id":"c38ae3d9.b9765","type":"noraf-config","name":"Firebase [test group]","group":"test","twofactor":"off","twofactorpin":"","localexecution":true,"structure":""}]
```

### Brightness example flow:
```
[{"id":"43e4d3e7.b408bc","type":"noraf-light","z":"15d66f47.1c0181","devicename":"Light","lightcolor":false,"brightnesscontrol":true,"commandonlycolor":false,"turnonwhenbrightnesschanges":true,"passthru":false,"statepayload":false,"brightnessoverride":"75","roomhint":"","name":"","colortype":"rgb","nora":"c38ae3d9.b9765","topic":"","onvalue":"true","onvalueType":"bool","offvalue":"false","offvalueType":"bool","temperaturemin":"2700","temperaturemax":"5500","twofactor":"off","twofactorpin":"","x":840,"y":280,"wires":[["cfca929e.e531"]]},{"id":"3fc16ca9.e4f834","type":"inject","z":"15d66f47.1c0181","name":"","props":[{"p":"payload"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"0","payloadType":"num","x":670,"y":180,"wires":[["43e4d3e7.b408bc"]]},{"id":"26ba3509.cd2d3a","type":"inject","z":"15d66f47.1c0181","name":"Offline","props":[{"p":"payload"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"{\"online\":false}","payloadType":"json","x":670,"y":300,"wires":[["43e4d3e7.b408bc"]]},{"id":"a62a9a3b.7de8d8","type":"inject","z":"15d66f47.1c0181","name":"Online","props":[{"p":"payload"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"{\"online\":true}","payloadType":"json","x":670,"y":340,"wires":[["43e4d3e7.b408bc"]]},{"id":"cfca929e.e531","type":"debug","z":"15d66f47.1c0181","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":1020,"y":280,"wires":[]},{"id":"b66687fb.b44118","type":"inject","z":"15d66f47.1c0181","name":"","props":[{"p":"payload"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"50","payloadType":"num","x":670,"y":220,"wires":[["43e4d3e7.b408bc"]]},{"id":"58ef778c.d573c8","type":"inject","z":"15d66f47.1c0181","name":"","props":[{"p":"payload"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"100","payloadType":"num","x":670,"y":260,"wires":[["43e4d3e7.b408bc"]]},{"id":"c38ae3d9.b9765","type":"noraf-config","name":"Firebase [test group]","group":"test","twofactor":"off","twofactorpin":"","localexecution":true,"structure":""}]
```

### RGB Color example flow
```
[{"id":"3fc16ca9.e4f834","type":"inject","z":"15d66f47.1c0181","name":"on","props":[{"p":"payload"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"{\"on\": true}","payloadType":"json","x":670,"y":120,"wires":[["a75c0846.8a3e58"]]},{"id":"26ba3509.cd2d3a","type":"inject","z":"15d66f47.1c0181","name":"Offline","props":[{"p":"payload"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"{\"online\":false}","payloadType":"json","x":670,"y":320,"wires":[["a75c0846.8a3e58"]]},{"id":"a62a9a3b.7de8d8","type":"inject","z":"15d66f47.1c0181","name":"Online","props":[{"p":"payload"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"{\"online\":true}","payloadType":"json","x":670,"y":360,"wires":[["a75c0846.8a3e58"]]},{"id":"cfca929e.e531","type":"debug","z":"15d66f47.1c0181","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":1020,"y":280,"wires":[]},{"id":"79ed0296.98a4fc","type":"inject","z":"15d66f47.1c0181","name":"off","props":[{"p":"payload"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"{\"on\": false}","payloadType":"json","x":670,"y":160,"wires":[["a75c0846.8a3e58"]]},{"id":"387c3de0.a59072","type":"inject","z":"15d66f47.1c0181","name":"red","props":[{"p":"payload"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"{\"color\": {\"spectrumRgb\": 16711680}}","payloadType":"json","x":670,"y":200,"wires":[["a75c0846.8a3e58"]]},{"id":"2499b7a6.003a18","type":"inject","z":"15d66f47.1c0181","name":"green","props":[{"p":"payload"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"{\"color\": {\"spectrumRgb\": 65280}}","payloadType":"json","x":670,"y":240,"wires":[["a75c0846.8a3e58"]]},{"id":"5a9045c7.a31c4c","type":"inject","z":"15d66f47.1c0181","name":"blue","props":[{"p":"payload"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"{\"color\": {\"spectrumRgb\": 255}}","payloadType":"json","x":670,"y":280,"wires":[["a75c0846.8a3e58"]]},{"id":"a75c0846.8a3e58","type":"noraf-light","z":"15d66f47.1c0181","devicename":"Light","lightcolor":true,"brightnesscontrol":false,"commandonlycolor":false,"turnonwhenbrightnesschanges":true,"passthru":false,"statepayload":true,"brightnessoverride":"","roomhint":"","name":"","colortype":"rgb","nora":"c38ae3d9.b9765","topic":"","onvalue":"true","onvalueType":"bool","offvalue":"false","offvalueType":"bool","temperaturemin":"2700","temperaturemax":"5500","twofactor":"off","twofactorpin":"","x":870,"y":280,"wires":[["cfca929e.e531"]]},{"id":"c38ae3d9.b9765","type":"noraf-config","name":"Firebase [test group]","group":"test","twofactor":"off","twofactorpin":"","localexecution":true,"structure":""}]
```
